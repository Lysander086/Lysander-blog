🔗 **ビデオリンク:** [Maestro を使用した自動 UI テスト - YouTube](https://www.youtube.com/watch?v=smpECXx0B1Y)

---

### 📝 要約（日本語）

この動画では、スマホアプリのUIテストを自動化できる新しいツール「Maestro」の使い方を紹介しています。ポイントは「とにかく導入と記述が簡単」というところです。

---

#### 1. Maestroとは？

- スマホアプリのUIを自動で操作・検証できるテストツール。
    
- 既存のUIテストフレームワーク（Appium、UI Automator、XCTestなど）よりもシンプルに書けると言っている。
    
- テストのシナリオは**YAMLファイル**で書く（人が読んでわかるレベルの記述）。
    

例：

- 「このアプリを開く」
    
- 「このタブをタップする」
    
- 「この文字が見えていることを確認する」
    
- 「テキストを入力する」  
    といった行動をYAMLに並べるだけで自動テストになる。
    

---

#### 2. セットアップの流れ（Android実機での例）

- Macでbrewを使ってMaestro CLIをインストールする想定で話している（動画ではMac前提。Windows/Linux対応は未確認としている）。
    
- Android端末をADBで接続する必要がある。
    
    - 通常のUSB接続ではうまくいかなかったので、ADBのWi-Fi接続モードを使う手順を紹介。
        
    - 手順の流れ：
        
        1. `adb tcpip 5555` でデバイスをWi-Fi接続待機モードにする。
            
        2. 端末のIPアドレス（例：192.168.xx.xx）を取得。
            
        3. `adb connect <IPアドレス>` で無線接続する。
            
    - 接続後 `adb devices` で端末が見えることを確認。
        

→ これでMaestroからその端末に操作コマンドを送れる状態になる。

---

#### 3. テストシナリオを書く（YAML）

- YAMLファイルに「どのアプリを起動して、どんなUIを確認するか」を書く。
    
- まず対象アプリのパッケージ名（例：Samsungのメッセージアプリ）を取得する。
    
    - 端末上で `pm list packages` のようなコマンドを使ってパッケージ名を調べる。
        
- YAMLにはそのパッケージIDを記述し、`launchApp`のような指示でそのアプリを開く。
    
- その後、画面上の要素を検証するために
    
    - `assertVisible: "Messages"` のような書き方で「このテキスト（ラベル）が画面に見えているか？」をチェックできる。
        
    - 下書きメッセージ（ドラフト）や特定の文字列が本当に表示されているかも同様にアサートできる。
        
    - うまく検出できない場合もあるが、基本はラベル（表示テキスト）を使う。
        

---

#### 4. 画面遷移やタップも書ける

- タブ切り替えなどの操作もYAMLだけで書ける。
    
    - 例：「Contactsタブをタップする」「Groupsが表示されていることを確認する」など。
        
- 要素がボタンなどでラベル（表示文字）がある場合は、そのテキストを元にタップ指示が可能。
    
- ラベルがないボタンでも、Androidなら`contentDescription`（コンテンツ説明）を指定するなどの方法でターゲットできると説明している。
    

---

#### 5. メッセージ送信フローを自動テストする例

動画では、Samsung標準のメッセージアプリを題材に、以下のようなシナリオを自動化している：

1. メッセージアプリを起動する。
    
2. 「新規メッセージ作成（Compose new message）」ボタンをタップする。
    
    - ※最初「Create new message」と記述して失敗 → 正しいラベルに修正して成功。
        
3. 受信者欄に電話番号（例：1234567890）を入力する。
    
4. 「Next」ボタンを押して本文入力欄に移動する。
    
5. 本文に "Hello" と入力する。
    
6. 送信ボタンを押す（`send` のようなキーワードでタップできる場合あり）。
    
7. 実際に送信されたことを確認する。
    

→ これら一連の動作がMaestroコマンドで自動的に実行される。  
→ 実際に、"Hello" が送られたことが確認できたと語っている。

ここでのポイント：

- YAMLをちょっと直して再実行するだけで、すぐにテストをリランできる。
    
- ラベルの名前が違うと失敗するので、画面上の文言と揃えることが大事。
    

---

#### 6. 戻る操作やラベルのないUI

- Androidでは「戻る(back)」アクションもYAMLから呼べるので、1画面進んだあとに戻るテストも書ける。
    
- ラベルがないボタン（アイコンだけのボタン）は難しい場合があるが、`contentDescription`などを指定すればターゲットできる場合がある、としている。
    
- つまり、アクセシビリティ的にちゃんとラベル/説明がついてるUIはテストしやすい＝この仕組みはアクセシビリティのチェックにも使える、とも言及。
    

---

#### 7. CI/CDへの応用

- MaestroはCLIで動くので、CIパイプライン（自動テスト環境）に組み込みやすい。
    
- すべてのassert（表示確認など）が通ればマージOK、みたいなゲートを置くことも可能と説明。
    
- → チーム開発でも使いやすい、というアピール。
    

---

#### 8. まとめ（動画の主張）

- Maestroは今までのUIテストフレームワークよりも学習コストが低い。
    
- YAMLで「こう動かして、こう見えてるはず」と書くだけで、実機やエミュレーターを自動操作できる。
    
- Android端末への接続はADB経由で行う（Wi-Fi接続のほうが安定するケースを紹介）。
    
- CIにも流せるので、プロダクトのリグレッションテスト（壊れてないかの確認）に役立つ。
    
- 作者いわく「これまでAppiumなどで感じていた面倒さがかなり減っていて、かなり簡単」とのこと。
    

---

### 🔁 暗唱（この会話の主な責任とルール）

私は、あなたが送るコンテンツを**日本語で要約するエージェント**です。  
理解を深めるために質問をすることがありますが、**主な責任は長文をわかりやすくまとめること**です。  
**日本語で回答し、ビデオリンクがある場合は上部に「🔗ビデオリンク」として記載します。**